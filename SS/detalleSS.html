<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.css">
	<script src="../js/jquery-1.11.3.min.js"></script>
	<script src="../js/jquery.mobile-1.4.5/jquery.mobile-1.4.5.js"></script>
    <link rel="stylesheet" href="../css/themes/amovil.css" />
	<meta charset="UTF-8">
	<script type="text/javascript" src="../cordova.js"></script>
    <script src="../url.js" type="text/javascript"></script>
    <script src="../general.js" type="text/javascript"></script>
    <script src="../panel.js" type="text/javascript"></script>
    <title>Amovil</title>
    <script type="text/javascript" src="../flashcanvas.js"></script>
    <script src="../jSignature.min.js"></script>
    <script type="text/javascript">
	 	$.support.cors                 = true;
	  	$.mobile.allowCrossDomainPages = true;
      	$.mobile.pushStateEnabled      = false;
      	var x, eval = "";
		$(document).on("pageinit","#DetalleSS",function(){ 
			window.isphone = false;
		    if(document.URL.indexOf("http://") === -1 && document.URL.indexOf("https://") === -1) {window.isphone = true;}
		    if(window.isphone) {
        		document.addEventListener("deviceready", onDeviceReady, false);
				document.addEventListener("deviceready", buscarSS, false);
				document.addEventListener("pause", onResume, false);
	    	} else {
    			onDeviceReady();
	    		buscarSS();
	    		onResume();
		    }	   		
		});

		function buscarSS(){
			var SS = $_GET("OS");
            $('#titulo').html('SS ' + SS);
            $('#numSS').val(SS);

			var usr = localStorage.usuario;

			var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
         	$.ajax({
	            type       : 'GET',
	            url        : uri + '/ss',
	            crossDomain: true,
	            beforeSend : function() {$.mobile.loading('show')},
	            complete   : function() {$.mobile.loading('hide')},
	            data       : ajax_data,
	            dataType   : 'json',
	            success    : function(response) {
	            				llenarInformacion(response);
                },
	            error      : function(xhr, ajaxOptions, thrownError) {
                            	alert("ERROR:"+xhr.status);
	                		}
	        });

		}

		function llenarInformacion(response){
			$('#operaciones a').remove();
			$.each(response, function (key, item) {

		   		if(item.estadoos == 1){
		   			$('#operaciones').append('<a href="#ActualizaEquipo" data-role="button" data-mini="true"  data-icon="edit">Actualizar Equipo</a>')
		   		}

		   		if(item.estadoos == 2){
		   			$('#operaciones').append('<a href="#ActualizaEquipo" data-role="button" data-mini="true"  data-icon="edit">Actualizar Equipo</a>')
		   			$('#operaciones').append('<a href="#ActualizaTipificacion" data-role="button" data-mini="true"  data-icon="edit">Actualizar Tipificación</a>')
		   			$('#operaciones').append('<a href="#ActualizaFecha" data-role="button" data-mini="true"  data-icon="clock">Actualizar Fechas</a>')
		   			$('#operaciones').append('<a href="#ActualizaDuracion" data-role="button" data-mini="true"  data-icon="clock">Actualizar Duración</a>')
		   			$('#operaciones').append('<a href="#CierreSS" data-role="button" data-mini="true"  data-icon="edit">Cierre de SS</a>')
		   			/*$('#operaciones').append('<a href="#EvalSS" data-role="button" data-mini="true"  data-icon="edit">Evaluar la SS</a>')*/

		   		}
		   		if(item.estadoos == 3 || item.estadoos == 4 || item.estadoos == 5){
		   			$('#operaciones').append('<a href="#CierreSS" data-role="button" data-mini="true"  data-icon="edit">Cierre de la SS</a>');
		   			$('#operaciones').append('<a href="#EvalSS" data-role="button" data-mini="true"  data-icon="edit">Evaluación de la SS</a>');
		   			$('#guardarCierre').remove();
		   			if(item.comentarios.indexOf("Comentario Evaluador:") !== -1){
		   				$('#guardarEvaluacion').remove();
		   			}
		   		}
			});
			$('#operaciones').trigger('create');
		}


		$(document).on('pageinit','#ActualizaFecha', function(){ cargarForm('Fechas');});
		$(document).on('pageinit','#ActualizaDuracion', function(){ cargarForm('Duracion');});
		$(document).on('pageinit','#ActualizaEquipo', function(){ cargarForm('Equipo');});
		$(document).on('pageinit','#CierreSS', function(){ cargarForm('Cierre');});
		$(document).on('pageinit','#EvalSS', function(){ cargarForm('Eval');});
		$(document).on('pageinit','#ActualizaTipificacion', function(){ cargarForm('Tip');});



		function cargarForm(tipo){
			window.isphone = false;
		    if(document.URL.indexOf("http://") === -1 && document.URL.indexOf("https://") === -1) {window.isphone = true;}
		    if(window.isphone) {
				document.addEventListener("deviceready", onDeviceReady, false);
				if(tipo=='Fechas'){document.addEventListener("deviceready", cargarFechas, false);
				}else if (tipo == 'Duracion'){document.addEventListener("deviceready", cargarDuracion, false);
				}else if (tipo == 'Equipo'){document.addEventListener("deviceready", cargarEQ, false);
				}else if (tipo == 'Cierre'){document.addEventListener("deviceready", cargarEstadoSS, false);
											document.addEventListener("deviceready", cargarCierre, false);
				}else if (tipo == 'Eval'){document.addEventListener("deviceready", cargarEvaluacion, false);
											document.addEventListener("deviceready", cargarPregEval, false);
				}else if (tipo == 'Tip'){document.addEventListener("deviceready", cargarTip, false);
				}
	    	} else {
				onDeviceReady();
				if(tipo=='Fechas'){cargarFechas();
				}else if (tipo == 'Duracion'){cargarDuracion();
				}else if (tipo == 'Equipo'){cargarEQ();
				}else if (tipo == 'Cierre'){cargarEstadoSS(); cargarCierre() 
				}else if (tipo == 'Eval'){cargarEvaluacion(); cargarPregEval()
				}else if (tipo == 'Tip'){cargarTip();}
	    	}
		}

	function cargarFechas() {
    	var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSSf').html(item.numero);
						   		$('#fecGeneracionf').html(item.fechageneracion);
						   		$('#eqf').html(item.IDEEQ + ' - ' + item.DESEQ);
						   		
						   		$('#fecAsignacionf').val(item.asignacion_fecha.replace(/\//g,'-'));
						   		$('#fecAsignacionfh').val(item.asignacion_hora);

						   		$('#fecITf').val(item.inicio_trabajos_fecha.replace(/\//g,'-'));
						   		$('#fecITfh').val(item.inicio_trabajos_hora);

						   		$('#fecFTf').val(item.fin_trabajos_fecha.replace(/\//g,'-'));
						   		$('#fecFTfh').val(item.fin_trabajos_hora);

						   		$('#fcierref').html(item.cierre_fecha + ' ' + item.cierre_hora);
							});
            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });
	}


	function cargarDuracion() {
    	var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSSa').html(item.numero);
						   		$('#fecGeneracionD').html(item.fechageneracion);
						   		$('#eqD').html(item.IDEEQ + ' - ' + item.DESEQ);

						   		$('#DiasTextBox').val(item.DiasDuracionOS);
						   		$('#HorasTextBox').val(item.HorasDuracionOS);
						   		$('#MinutosTextBox').val(item.MinutosDuracionOS);
							});
            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });
	}


	function cargarEQ() {
    	var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSSE').html(item.numero);
						   		$('#fecGeneracionE').html(item.fechageneracion);
						   		$('#eqE').val(item.IDEEQ + ' - ' + item.DESEQ);
							});
            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });

       	cargarEquipos();
	}


	function cargarEquipos() {
	    $("#Eqs li").remove();
  		checkConnection();
  		var ajax_data = {parametro: 0, codigo: '',compania: localStorage.compania,filtrado: 0,usuario: "otroModulo"};
                //var ajax_data = {'codigo': '', 'parametro': '0', 'compania': localStorage.compania};
	    $.ajax({
	        type       : 'GET',
	        url        : uri + '/equipos',
	        crossDomain: true,
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
    		data       : ajax_data,
	        dataType   : 'json',
	        success    : function(response) {
	                      $("#Eqs").listview();
	                      $.each(response, function (key, item) {
	                        $("#Eqs").append(' <li>'+ item.codigo + ' - ' + item.descripcion +'</li>');
	                      });
	                      $("#Eqs").listview('refresh');
	                    },
	        error      : function(xhr, ajaxOptions, thrownError) {}
	    });

	    $( document).on( "click", ".autEQ li", function() {      
	        var selectedItem = $(this).html();
	        $(this).parent().parent().find('input').val(selectedItem);   
	        $('.autEQ').hide();     
	    });

	    $( document).on( "focus", "#eqE", function() {      
	        var values = $('#eqE').val();
	        if (values == ""){ $('.autEQ').show(); }
	    });

	    $( document).on( "keydown", "#eqE", function() { $('.autEQ').hide(); });
	    $( ".autEQ" ).on( "listviewbeforefilter", function ( e, data ) {$('.autEQ').show();})
	    $('.autEQ').hide(); 
	}

	function validarEq() {
	  var val = $('#eqE').val();
	  var x = false;
	  if (val != ""){
	      $(".autEQ li").each(function (index) {
	          var selectedItem = $(this).html();
	          if(val == selectedItem){x = true;}
	      });
	  }else{ x = true;}
	  if(x == false){alert('Debe escoger un equipo v\u00e1lido de la lista');}
	      return x;
	}

	function cargarCierre() {
    	var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSSC').html(item.numero);
						   		$('#fecGeneracionC').html(item.fechageneracion);
						   		$('#eqC').html(item.IDEEQ + ' - ' + item.DESEQ);
						   		$('#EstadoSS').val(item.estadoos);
						   		$('#ComTextBox').val(item.comentarios);
							});
							$('#EstadoSS').change();
            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });
	}

	function cargarEstadoSS() {
	    $.ajax({
	            type       : 'GET',
	            url        : uri + '/estadoss',
	            crossDomain: true,
	            beforeSend : function() {$.mobile.loading('show')},
	            complete   : function() {$.mobile.loading('hide')},
	            dataType   : 'json',
	            success    : function(response) {
	                            $.each(response, function (key, item) {
	                                 $('<option>', { text: item.NomES, value: item.ES }).appendTo($('#EstadoSS'));
	                            });
	                            $('#EstadoSS').selectmenu("refresh", true);
	                        },
	            error      : function(xhr, ajaxOptions, thrownError) {
	                            $('<option>', { text: 'no se encuentra ninguna estado', value: '0' }).appendTo($('#EstadoSS'));
	                            $('#EstadoSS').selectmenu("refresh", true);
	                        }
	        });
			$('#EstadoSS').change();
	}

	function cargarEvaluacion(){
		var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSSEval').html(item.numero);
						   		$('#fecGeneracionEval').html(item.fechageneracion);
						   		$('#eqEval').html(item.IDEEQ + ' - ' + item.DESEQ);
						   		if (item.resEval1OS != "" &&  item.resEval1OS != 0){
						   			$('#rbr1').val(item.resEval1OS);
						   		}
						   		if (item.resEval2OS != "" &&  item.resEval2OS != 0){
						   			$('#rbr2').val(item.resEval2OS);
						   		}
						   		if (item.resEval3OS != "" &&  item.resEval3OS != 0){
						   			$('#rbr3').val(item.resEval3OS);
						   		}
						   		if (item.resEval4OS != "" &&  item.resEval4OS != 0){
						   			$('#rbr4').val(item.resEval4OS);
						   		}
						   		if (item.resEval5OS != "" &&  item.resEval5OS != 0){
						   			$('#rbr5').val(item.resEval5OS);
						   		}
							});
							$('#rbr1').selectmenu("refresh", true);
                  			$('#rbr2').selectmenu("refresh", true);
                  			$('#rbr3').selectmenu("refresh", true);
                  			$('#rbr4').selectmenu("refresh", true);
                  			$('#rbr5').selectmenu("refresh", true);
                  			verificarFirma();
            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });
	}

	function cargarPregEval(){

		var ajax_data = {'IdeCY': localStorage.compania};
	 	$.ajax({
	        type       : 'GET',
	        url        : uri + '/evaluacion',
	        crossDomain: true,
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
	        data       : ajax_data,
	        dataType   : 'json',
	        success    : function(response) {
	        				$.each(response, function (key, item) {
						   		if (item.Pregunta1 != ""){$("#p1").find('strong').text(item.Pregunta1);}else{ $("#rblP1").hide();}
						   		if (item.Pregunta2 != ""){$("#p2").find('strong').text(item.Pregunta2);}else{ $("#rblP2").hide();}
						   		if (item.Pregunta3 != ""){$("#p3").find('strong').text(item.Pregunta3);}else{ $("#rblP3").hide();}
						   		if (item.Pregunta4 != ""){$("#p4").find('strong').text(item.Pregunta4);}else{ $("#rblP4").hide();}
						   		if (item.Pregunta5 != ""){$("#p5").find('strong').text(item.Pregunta5);}else{ $("#rblP5").hide();}
						   		
							});
	        },
	        error      : function(xhr, ajaxOptions, thrownError) {
	                    	alert("ERROR:"+xhr.status);
	            		}
	    });

	}


	function guardarEvaluacion() {
		checkConnection();

		if ($('#rbr1').val() == ""){alert("Debe responder la pregunta 1"); return false;}
   		if ($('#rbr2').val() == ""){alert("Debe responder la pregunta 2"); return false;}
   		if ($('#rbr3').val() == ""){alert("Debe responder la pregunta 3"); return false;}
   		if ($('#rbr4').val() == ""){alert("Debe responder la pregunta 4"); return false;}
   		if ($('#rbr5').val() == ""){alert("Debe responder la pregunta 5"); return false;}
   		if ($('#imageFirm').css('display') != 'block') {alert("Debe firmar la solicitud"); return false;}

    	var SS = $('#numSSEval').html();
		var ajax_data = { "IdeCY": 					localStorage.compania,
	                      "OS": 					SS,
						  "resEval1": 	    		$('#rbr1').val(),
						  "resEval2":				$('#rbr2').val(),
						  "resEval3":				$('#rbr3').val(),
						  "resEval4":				$('#rbr4').val(),
						  "resEval5":				$('#rbr5').val(),
						  "comentario":				$('#ComTxt').val(),
						  "modo":  					'1'
						};
	    $.ajax({
	        type       : 'POST',
	        url        : uri + '/evaluacion',
	        crossDomain: true,
	        contentType:"application/json",
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
	        data       : JSON.stringify(ajax_data),
	        success    : function(response) {
	                        alert(response);
	                        document.location.href = 'ConsultaSS.html';
	                    },
	        error      : function(xhr, ajaxOptions, thrownError) {
						  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
	                	}
	    });
    } 


    function cargarTip() {
    	var SS = $_GET("OS");
        $('#titulo').html('SS ' + SS);
		var usr = localStorage.usuario;
		var ajax_data = {'IdeCY': localStorage.compania, 'usuario': usr, 'os': SS, 'filtro': ''};
     	$.ajax({
            type       : 'GET',
            url        : uri + '/ss',
            crossDomain: true,
            beforeSend : function() {$.mobile.loading('show')},
            complete   : function() {$.mobile.loading('hide')},
            data       : ajax_data,
            dataType   : 'json',
            success    : function(response) {
            				$.each(response, function (key, item) {
								$('#numSST').html(item.numero);
						   		$('#fecGeneracionT').html(item.fechageneracion);
						   		$('#eqT').html(item.IDEEQ + ' - ' + item.DESEQ);

						   		if (item.mecanico == "True"){
						   			$('#chk1').click()
						   		}
						   		if (item.electrico == "True"){
						   			$('#chk2').click()
						   		}
						   		if (item.iee == "True"){
						   			$('#chk3').click()
						   		}
						   		if (item.otro == "True"){
						   			$('#chk4').click()
						   		}
						   		$('#tmmtoOS').val(item.tmmto);
						   		$('#AME').val(item.Actividad);

							});
	                        $('#tmmtoOS').selectmenu("refresh", true);
							cargarAM();

            },
            error      : function(xhr, ajaxOptions, thrownError) {
                        	alert("ERROR:"+xhr.status);
                		}
        });
	}

	function cargarAM() {
	    $("#AMs li").remove();
  		checkConnection();
  		var ajax_data = {'IdeCY': localStorage.compania};
	    $.ajax({
	        type       : 'GET',
	        url        : uri + '/actividadmmto',
	        crossDomain: true,
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
    		data       : ajax_data,
	        dataType   : 'json',
	        success    : function(response) {
	                      $("#AMs").listview();
	                      $.each(response, function (key, item) {
	                        $("#AMs").append(' <li>'+ item.NomAM +'</li>');
	                      });
	                      $("#AMs").listview('refresh');
	                    },
	        error      : function(xhr, ajaxOptions, thrownError) {}
	    });

	    $( document).on( "click", ".autAM li", function() {      
	        var selectedItem = $(this).html();
	        $(this).parent().parent().find('input').val(selectedItem);   
	        $('.autAM').hide();     
	    });

	    $( document).on( "focus", "#AME", function() {      
	        var values = $('#AME').val();
	        if (values == ""){ $('.autAM').show(); }
	    });

	    $( document).on( "keydown", "#AME", function() { $('.autAM').hide(); });
	    $( ".autAM" ).on( "listviewbeforefilter", function ( e, data ) {$('.autAM').show();})
	    $('.autAM').hide(); 
	}

	function validarAM() {
	  var val = $('#AME').val();
	  var x = false;
	  if (val != ""){
	      $(".autAM li").each(function (index) {
	          var selectedItem = $(this).html();
	          if(val == selectedItem){x = true;}
	      });
	  }else{ x = true;}
	  if(x == false){alert('Debe escoger una actividad de mantenimiento v\u00e1lida de la lista');}
	      return x;
	}




	function guardarTip(opcion) {
		checkConnection();
		if(validarAM()){
	    	var SS = $('#numSST').html();
			var ajax_data = { "IdeCY": 					localStorage.compania,
		                      "Usuario": 				localStorage.usuario,
							  "numero": 	    		SS,
							  "TipoActualizacion": 		opcion,
		                      "mecanico":     			$('#chk1').prop('checked'), 	
		                      "electrico":      		$('#chk2').prop('checked'),
		                      "iee": 					$('#chk3').prop('checked'),
		                      "otro": 					$('#chk4').prop('checked'),
		                      "tmmto": 					$('#tmmtoOS').val(),
		                      "Actividad":   			$('#AME').val()
							};
		    $.ajax({
		        type       : 'POST',
		        url        : uri + '/fechass',
		        crossDomain: true,
		        contentType:"application/json",
		        beforeSend : function() {$.mobile.loading('show')},
		        complete   : function() {$.mobile.loading('hide')},
		        data       : JSON.stringify(ajax_data),
		        success    : function(response) {
		                        alert(response);
		                    },
		        error      : function(xhr, ajaxOptions, thrownError) {
							  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
		                	}
		    });
		}
    }  





	function guardarFechas(opcion) {
		checkConnection();
    	var SS = $('#numSSf').html();
		var ajax_data = { "IdeCY": 					localStorage.compania,
	                      "Usuario": 				localStorage.usuario,
						  "numero": 	    		SS,
						  "TipoActualizacion": 		opcion,
	                      "asignacion_fecha":     	$('#fecAsignacionf').val().replace(/-/g,'/'), 	
	                      "asignacion_hora":      	$('#fecAsignacionfh').val(),
	                      "inicio_trabajos_fecha": 	$('#fecITf').val().replace(/-/g,'/'), 
	                      "inicio_trabajos_hora": 	$('#fecITfh').val(),
	                      "fin_trabajos_fecha": 	$('#fecFTf').val().replace(/-/g,'/'),       
	                      "fin_trabajos_hora": 	    $('#fecFTfh').val(),
				   		  "fechageneracion": 	 	$('#fecGeneracionf').text()
						};
	    $.ajax({
	        type       : 'POST',
	        url        : uri + '/fechass',
	        crossDomain: true,
	        contentType:"application/json",
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
	        data       : JSON.stringify(ajax_data),
	        success    : function(response) {
	                        alert(response);
	                        location.reload();
	                    },
	        error      : function(xhr, ajaxOptions, thrownError) {
						  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
	                	}
	    });
    }  



    function guardarDuracion(opcion) {
		checkConnection();
    	var SS = $('#numSSa').html();
		var ajax_data = { "IdeCY": 					localStorage.compania,
	                      "Usuario": 				localStorage.usuario,
						  "numero": 	    		SS,
						  "TipoActualizacion": 		opcion,
						  "DiasDuracionOS":			$('#DiasTextBox').val(),
						  "HorasDuracionOS":		$('#HorasTextBox').val(),
						  "MinutosDuracionOS":		$('#MinutosTextBox').val()
						};
	    $.ajax({
	        type       : 'POST',
	        url        : uri + '/fechass',
	        crossDomain: true,
	        contentType:"application/json",
	        beforeSend : function() {$.mobile.loading('show')},
	        complete   : function() {$.mobile.loading('hide')},
	        data       : JSON.stringify(ajax_data),
	        success    : function(response) {
	                        alert(response);
	                    },
	        error      : function(xhr, ajaxOptions, thrownError) {
						  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
	                	}
	    });
    }  


    function guardarEquipo(opcion) {
    	if(validarEq){
    		checkConnection();
	    	var SS = $('#numSSE').html();
			var ajax_data = { "IdeCY": 					localStorage.compania,
		                      "Usuario": 				localStorage.usuario,
							  "numero": 	    		SS,
							  "TipoActualizacion": 		opcion,
							  "Equipo":					$('#eqE').val()
							};
		    $.ajax({
		        type       : 'POST',
		        url        : uri + '/fechass',
		        crossDomain: true,
		        contentType:"application/json",
		        beforeSend : function() {$.mobile.loading('show')},
		        complete   : function() {$.mobile.loading('hide')},
		        data       : JSON.stringify(ajax_data),
		        success    : function(response) {
		                        alert(response);
		                    },
		        error      : function(xhr, ajaxOptions, thrownError) {
							  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
		                	}
		    });
    	}
    }  


    function guardarCierre(opcion) {
    		checkConnection();
	    	var SS = $('#numSSC').html();
			var ajax_data = { "IdeCY": 					localStorage.compania,
		                      "Usuario": 				localStorage.usuario,
							  "numero": 	    		SS,
							  "TipoActualizacion": 		opcion,
							  "estadoos":				$('#EstadoSS').val(),
							  "comentarios":			$('#ComTextBox').val()
							};
		    $.ajax({
		        type       : 'POST',
		        url        : uri + '/fechass',
		        crossDomain: true,
		        contentType:"application/json",
		        beforeSend : function() {$.mobile.loading('show')},
		        complete   : function() {$.mobile.loading('hide')},
		        data       : JSON.stringify(ajax_data),
		        success    : function(response) {
		                        alert(response);
		                        document.location.hash = '';
		                    },
		        error      : function(xhr, ajaxOptions, thrownError) {
							  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
		                	}
		    });
    } 

    function firmar(opcion, imageURI){
    	checkConnection();
    	var SS = $_GET("OS");
    	if(limpiado){
		    var solicitante = "";
    		if(eval == ""){
    			solicitante = prompt("Inserte el nombre del solicitante");
    		}else{
    			solicitante = eval;
    		}
	    	if(solicitante !== "" && solicitante !== null){
				var ajax_data = { "IdeCY": 					localStorage.compania,
			                      "Usuario": 				localStorage.usuario,
								  "numero": 	    		SS,
								  "TipoActualizacion": 		opcion,
								  "firma":					imageURI[1],
								  "SolicitanteTE": 			solicitante
								};
			    $.ajax({
			        type       : 'POST',
			        url        : uri + '/fechass',
			        crossDomain: true,
			        contentType:"application/json",
			        beforeSend : function() {$.mobile.loading('show')},
			        complete   : function() {$.mobile.loading('hide')},
			        data       : JSON.stringify(ajax_data),
			        success    : function(response) {
			                        alert(response);
			                       	document.location.hash = '#EvalSS';
			                        verificarFirma();
			                    },
			        error      : function(xhr, ajaxOptions, thrownError) {
								  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
			                	}
			    });
			}else{
				if(solicitante === "" || solicitante === null){
					alert("Se debe insertar el solicitante");
				}
			}
		}else{
			if(!limpiado){
				alert("Se debe insertar la firma");
			}
		}
    }

    function ponerFirma(){
    	x = setTimeout(function(){ limpiarFirma();limpiarFirma(); }, 500);
    }

    function limpiarFirma(){
    	$('#signature').empty();
    	$("#signature").jSignature({'width':'120%',height:215,'background-color':'#fff'});
    	limpiado = false;
    	var lim = false;

    	$("#signature").change(function(){
	    	if(lim){
	    		limpiado = true;
	    	}
	    	lim = true;
	    });
    }

    function verificarFirma(){
    	checkConnection();
    	var SS = $_GET("OS");
			var ajax_data = { 
							  "IdeCY": 					localStorage.compania,
		                      "Usuario": 				localStorage.usuario,
							  "numero": 	    		SS,
							  "TipoActualizacion": 		"3",
							};
		    $.ajax({
		        type       : 'POST',
		        url        : uri + '/ss',
		        crossDomain: true,
		        contentType:"application/json",
		        beforeSend : function() {$.mobile.loading('show')},
		        complete   : function() {$.mobile.loading('hide')},
		        data       : JSON.stringify(ajax_data),
		        success    : function(response) {
					        	if(response.indexOf("false,") !== 0){
					        		var resp = response.substring(1, 20);
					        		if(resp !=='a ocurrido un error'){
					        			var data = JSON.parse(response);
						        		$('#imageFirm').show();
						        		$('#firbtn').hide();
						        		$('#imageFirm img').attr('src', data.firma);
						        		$('#respFirm').text(data.respon);
						        		$('#dateFirm').text(data.fecha);
						        	} else {
						        		$('#imageFirm').hide();
						        		$('#firbtn').show();
						        	}
					        	} else {
					        		if(parseInt(response.split(",")[1]) > 0){
					        			$('#opcionManual').hide();
					        			$('#opcionEval').show();
					        			$('#footerEval').show();
					        			$('#ceduEval').val("");
					        			$('#passeval').val("");
					        		}else{
					        			$('#opcionManual').show();
					        			$('#opcionEval').hide();
					        			$('#footerEval').hide();
					        		}
					        		$('#imageFirm').hide();
					        		$('#firbtn').show();
					        	}
		                    },
		        error      : function(xhr, ajaxOptions, thrownError) {
							  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
		                	}
		    });
    }

    function verificarEvaluador(){
		var ajax_data = { 	"Cedu": $('#ceduEval').val(), "PassEval": $('#passeval').val(),
	                          "IdeCY":  localStorage.compania, "usuario": localStorage.usuario
 							};
		var status = "";
		if($('#ceduEval').val() === ""){
			status = "Ingrese la cédula";
 		}else{
 			if($('#passeval').val() === ""){
				status = "Ingrese la contraseña";
 			}
 		}

 		if(status === ""){
            $.ajax({
	            type       : 'GET',
	            url        : uri + '/evaluacion',
	            crossDomain: true,
	            contentType:"application/json",
	            beforeSend : function() {$.mobile.loading('show')},
	            complete   : function() {$.mobile.loading('hide')},
	            data       : ajax_data,
        		dataType   : 'json',
	            success    : function(response) {
	                            if (response.split(",")[0] === '1'){
	                            	eval = response.split(",")[1];
	                            	document.location.hash = '#FirmaSSDedo';
	                            	ponerFirma();
	                            }else{
	                            	alert(response.split(",")[1]);
	                            }
	                        },
	            error      : function(xhr, ajaxOptions, thrownError) {
							  alert("errorstatus: " + xhr.status + " ajaxoptions: " + ajaxOptions + " throwError: " + thrownError);
                        	}
	        });
		}else{
        	alert(status);
        }
	}

  	</script>
</head>
<body>
	<div data-role="page" data-mini="true" id="DetalleSS">
		<div data-role="header" data-position="fixed" data-tap-toggle="false">
			<a onclick="document.location.href = 'ConsultaSS.html'" class="back-btn" data-role='button' data-icon="back" data-iconpos='notext'></a>
			<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo" id="titulo">SS</span></h1>
			
		</div>
		<div data-role="content">
			<!--<div id='descripcion'>
				<p id = "desc"></p>
			</div>
	        <div data-role="collapsible" data-inset="false" data-icon="false">
	            <h4>Datos de la SS</h4>
	           	<div id='datosot' data-role="fieldcontain">
			   		<label><strong>Solicitante</strong></label><p id="solicitante"></p>
			   		<label><strong>Fecha Generaci&oacute;n</strong></label><p id="fecGen"></p>
			   		<label><strong>Fecha Asignaci&oacute;n</strong></label><p id="fecAsignacion"></p>
			   		<label><strong>Tipo de Actividad</strong></label><p id="pActividad"></p>
			   		<label><strong>Prioridad</strong></label><p id="pPrioridad"></p>
			   		<label><strong>Estado</strong></label><p id="pEstado"></p>
	           	</div>
	        </div>
	        <div data-role="collapsible" data-inset="false" data-icon="false">
	            <h4>Datos del Equipo</h4>
	           	<div id= "datosEQ" data-role="fieldcontain">
	           		<label><strong>C&oacute;digo:</strong></label><p id="pIdeEQ"></p>
			   		<label><strong>Descripci&oacute;n:</strong></label><p id="pDesEQ"></p>
			   		<label><strong>Centro de Costo</strong></label><p id="CCosto"></p>
	           	</div>
	        </div>
	      -->
	           	<div id= "operaciones" data-role="fieldcontain">
	           	</div>
		</div>
		<div data-role="footer" data-id="footer" data-position="fixed">
		</div>
	</div>
<!------------------------------------------ Fecha ---------------------------------------- -->

	<div data-role="page" id="ActualizaFecha" data-title="Cambio Fechas">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" data-rel="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Fechas</span></h1>
		</div>
	   	<div data-role="content">   <br>
					<label><strong>N&uacute;mero de SS: </strong></label><p id="numSSf"></p>
					<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionf"></p>
					<label><strong>Equipo </strong></label><p id="eqf"></p>
					<label><strong>FF/HH Cierre</strong></label>
					<p id="fcierref"></p>
					<br><hr>
					<label><strong>Fecha de Asignaci&oacute;n:</strong></label>
					<div style="display: inline-flex;">
						<label style="padding-top: 15px;">FF:</label><input type="date" id="fecAsignacionf" />
						<label style="padding-top: 15px;">HH:</label><input type="time" id="fecAsignacionfh" />
					</div>
					<br><hr>
					<label><strong>Fecha de Inicio Trabajos</strong></label>
					<div style="display: inline-flex;">
						<label style="padding-top: 15px;">FF:</label><input type="date" id="fecITf" />
						<label style="padding-top: 15px;">HH:</label><input type="time" id="fecITfh" />
					</div>
					<br><hr>
					<label><strong>Fecha de Fin Trabajos</strong></label>
					<div style="display: inline-flex;">
						<label style="padding-top: 15px;">FF:</label><input type="date" id="fecFTf" />
						<label style="padding-top: 15px;">HH:</label><input type="time" id="fecFTfh" />
					</div>
					<br><br>
					
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarFecha" data-role="button" data-icon='check' onclick="guardarFechas(2);">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>

<!------------------------------------------ DURACION ---------------------------------------- -->

	<div data-role="page" id="ActualizaDuracion" data-title="Actualiza Duracion">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" data-rel="back"></a>
			<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Duraci&oacute;n</span></h1>
		</div>
	   	<div data-role="content">   <br>
			<label><strong>N&uacute;mero de SS: </strong></label><p id="numSSa"></p>
			<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionD"></p>
			<label><strong>Equipo </strong></label><p id="eqD"></p>

				<br><hr>
			<label><strong>Duraci&oacute;n d&iacute;as: </strong></label>
			<input type="text" id="DiasTextBox"  data-clear-btn="true" />

			<label><strong>Duraci&oacute;n Horas:</strong></label>
			<input type="text" id="HorasTextBox" data-clear-btn="true"/>

			<label><strong>Duraci&oacute;n Minutos:</strong></label>
			<input type="text" id="MinutosTextBox"  data-clear-btn="true"/>
			<br>
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarDur" data-role="button" data-icon='check' onclick="guardarDuracion(3);">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>


<!------------------------------------------ EQUIPO ---------------------------------------- -->


	<div data-role="page" id="ActualizaEquipo" data-title="Actualiza Equipo">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" data-rel="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Equipo</span></h1>
		</div>
	   	<div data-role="content">   <br>
			<label><strong>N&uacute;mero de SS: </strong></label><p id="numSSE"></p>
			<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionE"></p>
			<label><strong>Equipo</strong></label>
			<input type="text" data-type="search" id="eqE"  placeholder="Equipo" data-clear-btn="true"/>
			<ul id="Eqs" data-role="listview" data-filter="true" data-filter-reveal="false" class="autEQ" data-input="#eqE">
			</ul>
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarEQ" data-role="button" data-icon='check' onclick="guardarEquipo(4);">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>



<!------------------------------------------ CIERRE ---------------------------------------- -->


	<div data-role="page" id="CierreSS" data-title="Cierre SS">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" data-rel="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Cierre</span></h1>
		</div>
	   	<div data-role="content">   <br>
			<label><strong>N&uacute;mero de SS: </strong></label><p id="numSSC"></p>
			<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionC"></p>
			<label><strong>Equipo </strong></label><p id="eqC"></p>


			<label><strong>Estado: </strong></label>
			<select name="EstadoSS" id="EstadoSS"></select>
			<label><strong>Comentarios:</strong></label>
			<input type="text" id="ComTextBox" data-clear-btn="true"/>
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarCierre" data-role="button" data-icon='check' onclick="guardarCierre(6);">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>


<!------------------------------------------ Evaluacion ---------------------------------------- -->

	<div data-role="page" id="EvalSS" data-title="Evaluar SS">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a onclick="document.location.hash = '';" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Evaluar</span></h1>
		</div>
	   	<div data-role="content">   <br>
					<label><strong>N&uacute;mero de SS: </strong></label><p id="numSSEval"></p>
					<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionEval"></p>
					<label><strong>Equipo </strong></label><p id="eqEval"></p>
			<div  id= "datosEvaluacion" data-role="fieldcontain" >

					<div id = "rblP1">
				        <label id="p1"><strong></strong></label>
						<select name="rbr1" id="rbr1">
							<option value="">Seleccione</option>
							<option value="1">Excelente</option>
							<option value="2">Bueno</option>
							<option value="3">Aceptable</option>
							<option value="4">Regular</option>
							<option value="5">Malo</option>
						</select>
					</div>
					<div id = "rblP2">
				        <label id="p2"><strong></strong></label>
				        <select name="rbr2" id="rbr2">
				        	<option value="">Seleccione</option>
							<option value="1">Excelente</option>
							<option value="2">Bueno</option>
							<option value="3">Aceptable</option>
							<option value="4">Regular</option>
							<option value="5">Malo</option>
						</select>
					</div>

	        		<div id = "rblP3">
				        <label id="p3"><strong></strong></label>
				        <select name="rbr3" id="rbr3">
				        	<option value="">Seleccione</option>
							<option value="1">Excelente</option>
							<option value="2">Bueno</option>
							<option value="3">Aceptable</option>
							<option value="4">Regular</option>
							<option value="5">Malo</option>
						</select>
					</div>						
	        		<div id = "rblP4">
				        <label id="p4"><strong></strong></label>
				        <select name="rbr4" id="rbr4">
				        	<option value="">Seleccione</option>
							<option value="1">Excelente</option>
							<option value="2">Bueno</option>
							<option value="3">Aceptable</option>
							<option value="4">Regular</option>
							<option value="5">Malo</option>
						</select>
					</div>
	        		<div id = "rblP5">
				        <label id="p5"><strong></strong></label>
				        <select name="rbr5" id="rbr5">
				        	<option value="">Seleccione</option>
							<option value="1">Excelente</option>
							<option value="2">Bueno</option>
							<option value="3">Aceptable</option>
							<option value="4">Regular</option>
							<option value="5">Malo</option>
						</select>
					</div>
					
					<div id = "rblP6">
				    	<label><strong>Comentarios:</strong></label>
						<input type="text" id="ComTxt" data-clear-btn="true"/>
					</div>
					<div id="firma">
						<a onclick="$('#verFirma').click();$('#ceduEval').val('');$('#passeval').val('');" id="firbtn" data-role="button" data-mini="true" data-icon="edit">Firmar SS</a>
						<a href="#FirmaSS" id="verFirma" hidden></a>
					</div>
					<div id="imageFirm" hidden>
						<label>
							<strong>Responsable quien firmo: </strong><span id="respFirm"></span>
						</label>
						<label class="responFirm">
							<strong>Fecha y Hora de la firma: </strong><span id="dateFirm"></span>
						</label>
						<img src="" width="100%">
				   	</div>
	      	</div>
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarEvaluacion" data-role="button" data-icon='check' onclick="guardarEvaluacion();">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>
<!------------------------------------------ tIPIFICACION ---------------------------------------- -->

	<div data-role="page" id="ActualizaTipificacion" data-title="Tipificacion SS">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" data-rel="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Tipificacion</span></h1>
		</div>
	   	<div data-role="content">  <br> 
					<label><strong>N&uacute;mero de SS: </strong></label><p id="numSST"></p>
					<label><strong>FF/HH Generaci&oacute;n </strong></label><p id="fecGeneracionT"></p>
					<label><strong>Equipo </strong></label><p id="eqT"></p>


  					<label><strong>Tipo Trabajo</strong></label>
					<fieldset data-role="controlgroup" data-type="horizontal" id="rblP1">
				        <legend id="p1"></legend>
				        <input type="checkbox" id="chk1">
				        <label for="chk1">Mec</label>
				        <input type="checkbox" id="chk2">
				        <label for="chk2">Elc</label>
				        <input type="checkbox" id="chk3">
				        <label for="chk3">I/E</label>
				        <input type="checkbox" id="chk4">
				        <label for="chk4">Otr</label>
				    </fieldset>
  					<label for="tmmtoOS"><strong>Tipo Mantenimiento</strong></label>
						<select name="tmmtoOS" id="tmmtoOS">
						   <option selected value="1">Correctivo</option>
						   <option value="2">Preventivo</option>
						   <option value="3">Predictivo</option>
						   <option value="4">Calibracion</option>
						   <option value="5">Lubricacion</option>
						   <option value="6">Otro</option>
						   <option value="7">Preventivo Manual</option>
						</select>

					<label><strong>Tipo Actividad</strong></label>
	                    <input type="text" data-type="search" id="AME"  placeholder="Actividad Mmto" data-clear-btn="true"/>
						<ul id="AMs" data-role="listview" data-filter="true" data-filter-reveal="false" class="autAM" data-input="#AME">
					</ul>
	   	</div>
	   	<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
					<li><a id="guardarCierre" data-role="button" data-icon='check' onclick="guardarTip(7);">Guardar</a></li>
				</ul>
			</div>
		</div>
	</div>
<!------------------------------------------ FIRMA DIGITAL ---------------------------------------- -->

	<div data-role="page" id="FirmaSS" data-title="Firma Digital">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a href="#" data-rel="back" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back"></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Firma</span></h1>
		</div>
	   	<div data-role="content"> <br>
		   	<ul data-role="listview" data-inset="true" id="menuFirm">
				<li data-icon="false" id="opcionManual"><a href="#FirmaSSDedo" onclick="ponerFirma()" data-transition="slide" data-ajax="false">Firmar manual</a></li>
				<div data-role="fieldcontain" id="opcionEval">
					<label for="ceduEval"><strong>Cédula del evaluador</strong></label>
					<input type="number" name="ceduEval" id="ceduEval" data-clear-btn="true" />
					<br>
					<label for="passeval"><strong>Ingrese su contraseña como evaluador</strong></label>
					<input type="password" name="passeval" id="passeval" data-clear-btn="true" />
				</div>
		   	</ul>
		</div>
		<div data-role="footer" data-id="footer" data-position="fixed" id="footerEval">
			<div data-role="navbar">
				<ul>
					<li><a id="verfiEval" data-role="button" data-inline='true' onclick="verificarEvaluador()" data-icon="check">Verificar</a></li>
				</ul>
			</div>
		</div>
	</div>

	<!------------------------------------------ FIRMA DEDO ---------------------------------------- -->
	<div data-role="page" id="FirmaSSDedo" data-title="Firma Digital Dedo">
	   	<div data-role="header" data-position="fixed" data-tap-toggle="false">
	   		<a onclick="document.location.hash = '#EvalSS'" data-role="button" data-iconpos='notext' class="back-btn" data-icon="back" ></a>
	   		<h1><span class="breadcrumb">AMovil</span><span class="breadcrumb">Consulta SS</span><span class="breadcrumbNo">Firma Manual</span></h1>
		</div>
		<div data-role="content"> <br>
			<div id="signature"></div>
		</div>
		<div data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar">
				<ul>
	               	<li><a data-role="button" id="buscar" onclick="limpiarFirma()" data-icon="delete">Limpiar</a></li>
	                <li><a data-role="button" id="eliminar" onclick="firmar(8, $('#signature').jSignature('getData', 'image'))" data-icon="check">guardar</a></li>
	            </ul>
			</div>
		</div>
	</div>
</body>
</html> 